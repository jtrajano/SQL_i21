CREATE TABLE [dbo].[tblMFShiftActivity]
(
	intShiftActivityId INT NOT NULL IDENTITY,
	intConcurrencyId INT NULL CONSTRAINT DF_tblMFShiftActivity_intConcurrencyId DEFAULT 0,
	strShiftActivityNumber NVARCHAR(50) COLLATE Latin1_General_CI_AS,
	intManufacturingCellId INT NOT NULL,
	dtmShiftDate DATETIME NOT NULL,
	intShiftId INT NOT NULL,
	dtmShiftStartTime DATETIME NOT NULL,
	dtmShiftEndTime DATETIME NOT NULL,
	intShiftActivityStatusId INT NOT NULL,
	dblPartialQtyProduced NUMERIC(18, 6) NOT NULL,
	intScheduledRuntime INT NOT NULL,
	intTotalDowntime INT NOT NULL,
	intUnitMeasureId INT,
	dblTotalProducedQty NUMERIC(18, 6) NOT NULL CONSTRAINT DF_tblMFShiftActivity_dblTotalProducedQty DEFAULT 0,
	dblStdCapacity NUMERIC(18, 6),
	dblTargetEfficiency NUMERIC(18, 6),
	intLineUnitMeasureId INT,
	intLineRateUnitMeasureId INT,
	strComments NVARCHAR(100) COLLATE Latin1_General_CI_AS,
	dblTotalSKUProduced NUMERIC(18, 6),
	intSKUUnitMeasureId INT,
	dblTotalWeightofProducedQty NUMERIC(18, 6),
	intWeightUnitMeasureId INT,
	intBaseUnitMeasureId INT,
	intReduceAvailableTime INT,

	intCreatedUserId int NULL,
	dtmCreated datetime NULL CONSTRAINT DF_tblMFShiftActivity_dtmCreated DEFAULT GetDate(),
	intLastModifiedUserId int NULL,
	dtmLastModified datetime NULL CONSTRAINT DF_tblMFShiftActivity_dtmLastModified DEFAULT GetDate(),
		
	CONSTRAINT PK_tblMFShiftActivity PRIMARY KEY (intShiftActivityId), 
	CONSTRAINT AK_tblMFShiftActivity_intManufacturingCellId_dtmShiftDate_intShiftId UNIQUE (
		intManufacturingCellId,
		dtmShiftDate,
		intShiftId),
	CONSTRAINT FK_tblMFShiftActivity_tblMFManufacturingCell FOREIGN KEY (intManufacturingCellId) REFERENCES tblMFManufacturingCell(intManufacturingCellId),
	CONSTRAINT FK_tblMFShiftActivity_tblMFShift FOREIGN KEY (intShiftId) REFERENCES tblMFShift(intShiftId),
	CONSTRAINT FK_tblMFShiftActivity_tblMFShiftActivityStatus FOREIGN KEY (intShiftActivityStatusId) REFERENCES tblMFShiftActivityStatus(intShiftActivityStatusId),
	CONSTRAINT FK_tblMFShiftActivity_tblICUnitMeasure FOREIGN KEY (intUnitMeasureId) REFERENCES tblICUnitMeasure(intUnitMeasureId),
	CONSTRAINT FK_tblMFShiftActivity_tblICUnitMeasure_intLineUnitMeasureId FOREIGN KEY (intLineUnitMeasureId) REFERENCES tblICUnitMeasure(intUnitMeasureId),
	CONSTRAINT FK_tblMFShiftActivity_tblICUnitMeasure_intLineRateUnitMeasureId FOREIGN KEY (intLineRateUnitMeasureId) REFERENCES tblICUnitMeasure(intUnitMeasureId),
	CONSTRAINT FK_tblMFShiftActivity_tblICUnitMeasure_intSKUUnitMeasureId FOREIGN KEY (intSKUUnitMeasureId) REFERENCES tblICUnitMeasure(intUnitMeasureId),
	CONSTRAINT FK_tblMFShiftActivity_tblICUnitMeasure_intWeightUnitMeasureId FOREIGN KEY (intWeightUnitMeasureId) REFERENCES tblICUnitMeasure(intUnitMeasureId),
	CONSTRAINT FK_tblMFShiftActivity_tblICUnitMeasure_intBaseUnitMeasureId FOREIGN KEY (intBaseUnitMeasureId) REFERENCES tblICUnitMeasure(intUnitMeasureId)
)