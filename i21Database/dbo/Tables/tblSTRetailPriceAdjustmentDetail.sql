CREATE TABLE [dbo].[tblSTRetailPriceAdjustmentDetail]
(
	[intRetailPriceAdjustmentDetailId] INT NOT NULL IDENTITY, 
    [intRetailPriceAdjustmentId] INT NOT NULL, 
	[intItemPricingId] INT NULL,
    [intStoreGroupId] INT NULL, 
    [intCompanyLocationId] INT NULL, 
    [strRegion] NVARCHAR(6) COLLATE Latin1_General_CI_AS NULL, 
    [strDistrict] NVARCHAR(6) COLLATE Latin1_General_CI_AS NULL, 
    [strState] NVARCHAR(2) COLLATE Latin1_General_CI_AS NULL, 
    [intEntityId] INT NULL, 
    [intCategoryId] INT NULL, 
	[intManufacturerId] INT NULL,
    [intFamilyId] INT NULL, 
    [intClassId] INT NULL, 
    [intItemUOMId] INT NULL, 
    [strUpcDescription] NVARCHAR(60) COLLATE Latin1_General_CI_AS NULL,
    [ysnPromo] BIT NULL, 
    [strPriceMethod] NVARCHAR(50) COLLATE Latin1_General_CI_AS NULL, 
    [dblFactor] NUMERIC(18, 6) NULL, 
	[strRoundPrice] NVARCHAR(3) COLLATE Latin1_General_CI_AS NULL,
	[strPriceEndingDigit] NVARCHAR(10) COLLATE Latin1_General_CI_AS NULL,
    [dblPrice] NUMERIC(18, 6) NULL, 
	[dblLastCost] NUMERIC(18, 6) NULL, 
    -- [ysnActive] BIT NULL, 
    -- [ysnOneTimeuse] BIT NULL, 
    [ysnChangeCost] BIT NULL, 
    [dblCost] NUMERIC(18, 6) NULL, 
    [dtmSalesStartDate] DATETIME NULL, 
    [dtmSalesEndDate] DATETIME NULL, 
	-- [ysnPosted] BIT NULL, 
	[strPriceType] NVARCHAR(50) COLLATE Latin1_General_CI_AS NULL, 
    [intModifiedByUserId] INT NULL, 
	[intConcurrencyId] INT NOT NULL, 

    CONSTRAINT [PK_tblSTRetailPriceAdjustmentDetail] PRIMARY KEY CLUSTERED ([intRetailPriceAdjustmentDetailId] ASC), 
    CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblSTRetailPriceAdjustment] FOREIGN KEY ([intRetailPriceAdjustmentId]) REFERENCES [tblSTRetailPriceAdjustment]([intRetailPriceAdjustmentId]) ON DELETE CASCADE,
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblSTStoreGroup] FOREIGN KEY ([intStoreGroupId]) REFERENCES [tblSTStoreGroup]([intStoreGroupId]),  
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblSMCompanyLocation] FOREIGN KEY ([intCompanyLocationId]) REFERENCES [tblSMCompanyLocation]([intCompanyLocationId]), 
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblEMEntity] FOREIGN KEY ([intEntityId]) REFERENCES tblEMEntity([intEntityId]), 
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblICCategory] FOREIGN KEY ([intCategoryId]) REFERENCES [tblICCategory]([intCategoryId]) ,
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblICManufacturer] FOREIGN KEY ([intManufacturerId]) REFERENCES [tblICManufacturer]([intManufacturerId]) ,
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblSTSubcategory_intFamilyId] FOREIGN KEY ([intFamilyId]) REFERENCES [tblSTSubcategory]([intSubcategoryId]), 
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblSTSubcategory_intClassId] FOREIGN KEY ([intClassId]) REFERENCES [tblSTSubcategory]([intSubcategoryId]), 
	CONSTRAINT [FK_tblSTRetailPriceAdjustmentDetail_tblICItemUOM] FOREIGN KEY ([intItemUOMId]) REFERENCES [tblICItemUOM]([intItemUOMId]),
    CONSTRAINT [AK_tblSTRetailPriceAdjustmentDetail] UNIQUE NONCLUSTERED ([intRetailPriceAdjustmentId],[intCompanyLocationId],[strRegion],[strDistrict],[intEntityId],[intCategoryId],[intFamilyId],[intClassId],[intItemUOMId],[strPriceType]) 
)
