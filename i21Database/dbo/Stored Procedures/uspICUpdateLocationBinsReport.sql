CREATE PROCEDURE [dbo].[uspICUpdateLocationBinsReport] 
	@intUserId AS INT = NULL 
AS
DELETE FROM tblICLocationBinsReport

INSERT INTO tblICLocationBinsReport(
     [intItemId]
   , [strItemNo]
   , [strType]
   , [strDescription]
   , [strLotTracking]
   , [strInventoryTracking]
   , [strStatus]
   , [intLocationId]
   , [intItemLocationId]
   , [intSubLocationId]
   , [intCategoryId]
   , [strCategoryCode]
   , [intCommodityId]
   , [strCommodityCode]
   , [intStorageLocationId]
   , [strLocationName]
   , [strLocationType]
   , [intStockUOMId]
   , [strStockUOM]
   , [strStockUOMType]
   , [dblStockUnitQty]
   , [intAllowNegativeInventory]
   , [strAllowNegativeInventory]
   , [intCostingMethod]
   , [strCostingMethod]
   , [dblAmountPercent]
   , [dblSalePrice]
   , [dblMSRPPrice]
   , [strPricingMethod]
   , [dblLastCost]
   , [dblStandardCost]
   , [dblAverageCost]
   , [dblEndMonthCost]
   , [dblOnOrder]
   , [dblInTransitInbound]
   , [dblUnitOnHand]
   , [dblInTransitOutbound]
   , [dblBackOrder]
   , [dblOrderCommitted]
   , [dblUnitStorage]
   , [dblConsignedPurchase]
   , [dblConsignedSale]
   , [dblUnitReserved]
   , [dblAvailable]
   , [dblExtended]
   , [dblExtendedRetail]
   , [dblMinOrder]
   , [dblLeadTime]
   , [dblSuggestedQty]
   , [dblReorderPoint]
   , [dblNearingReorderBy]
   , [dblCapacity]
   , [dblSpaceAvailable]
   , [dblPercentFull]
   , [dtmLastPurchaseDate]
   , [dtmLastSaleDate]
   , [strEntityVendor]
   , [dblAverageUsagePerPeriod]
   , [dblInTransitDirect]
   , [dtmDateCreated]
   , [intCreatedByUserId]
)
SELECT 
     [intItemId]
   , [strItemNo]
   , [strType]
   , [strDescription]
   , [strLotTracking]
   , [strInventoryTracking]
   , [strStatus]
   , [intLocationId]
   , [intItemLocationId]
   , [intSubLocationId]
   , [intCategoryId]
   , [strCategoryCode]
   , [intCommodityId]
   , [strCommodityCode]
   , [intStorageLocationId]
   , [strLocationName]
   , [strLocationType]
   , [intStockUOMId]
   , [strStockUOM]
   , [strStockUOMType]
   , [dblStockUnitQty]
   , [intAllowNegativeInventory]
   , [strAllowNegativeInventory]
   , [intCostingMethod]
   , [strCostingMethod]
   , [dblAmountPercent]
   , [dblSalePrice]
   , [dblMSRPPrice]
   , [strPricingMethod]
   , [dblLastCost]
   , [dblStandardCost]
   , [dblAverageCost]
   , [dblEndMonthCost]
   , [dblOnOrder]
   , [dblInTransitInbound]
   , [dblUnitOnHand]
   , [dblInTransitOutbound]
   , [dblBackOrder]
   , [dblOrderCommitted]
   , [dblUnitStorage]
   , [dblConsignedPurchase]
   , [dblConsignedSale]
   , [dblUnitReserved]
   , [dblAvailable]
   , [dblExtended]
   , [dblExtendedRetail]
   , [dblMinOrder]
   , [dblLeadTime]
   , [dblSuggestedQty]
   , [dblReorderPoint]
   , [dblNearingReorderBy]
   , [dblCapacity]
   , [dblSpaceAvailable]
   , [dblPercentFull]
   , [dtmLastPurchaseDate]
   , [dtmLastSaleDate]
   , [strEntityVendor]
   , [dblAverageUsagePerPeriod]
   , [dblInTransitDirect]
	,GETUTCDATE()
	,@intUserId
FROM
	vyuICGetLocationBins